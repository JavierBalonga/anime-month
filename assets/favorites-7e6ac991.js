import{j as e,b as o,C as h,r as i,T as v,d as j,e as y}from"./index-07dc3d49.js";import{a as b,A as N,b as w,c as C,d as D,f as F,u}from"./alert-4d56a018.js";const I=h("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 whitespace-nowrap",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m({className:r,variant:t,...s}){return e.jsx("div",{className:o(I({variant:t}),r),...s})}const p=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t}));p.displayName="Card";const O=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:o("flex flex-col space-y-1.5 p-6",r),...t}));O.displayName="CardHeader";const T=i.forwardRef(({className:r,...t},s)=>e.jsx("h3",{ref:s,className:o("text-2xl font-semibold leading-none tracking-tight",r),...t}));T.displayName="CardTitle";const k=i.forwardRef(({className:r,...t},s)=>e.jsx("p",{ref:s,className:o("text-sm text-muted-foreground",r),...t}));k.displayName="CardDescription";const A=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:o("p-6 pt-0",r),...t}));A.displayName="CardContent";const R=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:o("flex items-center p-6 pt-0",r),...t}));R.displayName="CardFooter";function E({id:r,onDragStart:t,onDragOver:s}){const{data:a,isLoading:c,error:n}=b({queryKey:["/anime",r],queryFn:()=>F({id:r})}),x=l=>{const d=l.currentTarget;d&&(d.style.setProperty("opacity","0.5"),t(r))},f=l=>{const d=l.currentTarget;d&&d.style.removeProperty("opacity")},g=l=>{l.preventDefault(),s(r)};return e.jsx(p,{className:"flex h-32 cursor-grab flex-row gap-3 rounded-xl p-3 lg:h-52 lg:gap-6 lg:p-6",draggable:!0,onDrag:x,onDragEnd:f,onDragOver:g,children:n?e.jsxs(N,{variant:"destructive",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(C,{children:"Error"}),e.jsx(D,{children:n instanceof Error?n.message:"Something went wrong!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"aspect-[3/4] h-full flex-shrink-0 overflow-hidden rounded-sm",children:c||!(a!=null&&a.data)?e.jsx("div",{className:"h-full animate-pulse bg-neutral-500 dark:bg-neutral-300"}):e.jsx("img",{src:a.data.images.jpg.image_url,alt:a.data.title,width:120,height:160,className:"object-cover brightness-75"})}),e.jsxs("div",{className:"flex grow flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-2 lg:flex-row lg:gap-4",children:[c||!(a!=null&&a.data)?e.jsx("div",{className:"h-9 w-full animate-pulse rounded-sm bg-neutral-500 dark:bg-neutral-300"}):e.jsxs(v,{children:[e.jsx(j,{asChild:!0,children:e.jsx("h4",{className:"line-clamp-1 text-xl font-medium tracking-tight lg:text-3xl",children:a.data.title})}),e.jsx(y,{children:e.jsx("p",{children:a.data.title})})]}),e.jsx("div",{className:"flex flex-row flex-wrap items-center gap-2 lg:flex-nowrap",children:c||!(a!=null&&a.data)?Array.from({length:3},(l,d)=>e.jsx(m,{className:"animate-pulse bg-neutral-500 text-transparent dark:bg-neutral-300",children:"XXX"},d)):a==null?void 0:a.data.genres.map(l=>e.jsx(m,{children:l.name},l.mal_id))})]}),c||!(a!=null&&a.data)?e.jsx("div",{className:"hidden flex-col gap-2 lg:flex",children:Array.from({length:5},(l,d)=>e.jsx("div",{className:"h-4 w-full animate-pulse rounded-sm bg-neutral-500 dark:bg-neutral-300"},d))}):e.jsx("p",{className:"line-clamp-5 hidden text-neutral-500 dark:text-neutral-300 lg:block",children:a.data.synopsis})]})]})})}function P(){const r=u(n=>n.favorites),t=u(n=>n.setFavorites),s=i.useRef({draggedId:null,draggedOverId:null}),a=n=>{s.current.draggedId=n},c=n=>{s.current.draggedOverId=n;const x=r.indexOf(s.current.draggedId),f=r.indexOf(s.current.draggedOverId),g=[...r];g.splice(x,1),g.splice(f,0,s.current.draggedId),t(g)};return e.jsx("div",{className:"flex w-full max-w-5xl grow flex-col gap-2 py-10",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("div",{className:"flex flex-col gap-4 py-7 lg:gap-8 lg:py-14",children:r==null?void 0:r.map(n=>e.jsx(E,{id:n,onDragStart:a,onDragOver:c},n))})})})})}export{P as default};
