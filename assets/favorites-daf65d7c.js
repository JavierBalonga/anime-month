import{r as i,j as e,b as c,T as h,d as j,L as v,e as N}from"./index-88f1b430.js";import{u as w,A as y,a as C,b,c as D,e as F}from"./alert-53cbd5d7.js";import{B as f}from"./badge-24dbb610.js";import{u as p}from"./favorites-18b1d446.js";const u=i.forwardRef(({className:r,...l},s)=>e.jsx("div",{ref:s,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",r),...l}));u.displayName="Card";const I=i.forwardRef(({className:r,...l},s)=>e.jsx("div",{ref:s,className:c("flex flex-col space-y-1.5 p-6",r),...l}));I.displayName="CardHeader";const O=i.forwardRef(({className:r,...l},s)=>e.jsx("h3",{ref:s,className:c("text-2xl font-semibold leading-none tracking-tight",r),...l}));O.displayName="CardTitle";const T=i.forwardRef(({className:r,...l},s)=>e.jsx("p",{ref:s,className:c("text-sm text-muted-foreground",r),...l}));T.displayName="CardDescription";const k=i.forwardRef(({className:r,...l},s)=>e.jsx("div",{ref:s,className:c("p-6 pt-0",r),...l}));k.displayName="CardContent";const A=i.forwardRef(({className:r,...l},s)=>e.jsx("div",{ref:s,className:c("flex items-center p-6 pt-0",r),...l}));A.displayName="CardFooter";function R({id:r,onDragStart:l,onDragOver:s}){const{data:a,isLoading:o,error:t}=w({queryKey:["/anime",r],queryFn:()=>F({id:r})}),x=n=>{const d=n.currentTarget;d&&(d.style.setProperty("opacity","0.5"),l(r))},m=n=>{const d=n.currentTarget;d&&d.style.removeProperty("opacity")},g=n=>{n.preventDefault(),s(r)};return e.jsx(u,{className:"flex h-32 cursor-grab flex-row gap-3 rounded-xl p-3 lg:h-52 lg:gap-6 lg:p-6",draggable:!0,onDrag:x,onDragEnd:m,onDragOver:g,children:t?e.jsxs(y,{variant:"destructive",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx(b,{children:"Error"}),e.jsx(D,{children:t instanceof Error?t.message:"Something went wrong!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"aspect-[3/4] h-full flex-shrink-0 overflow-hidden rounded-sm",children:o||!(a!=null&&a.data)?e.jsx("div",{className:"h-full animate-pulse bg-neutral-500 dark:bg-neutral-300"}):e.jsx("img",{src:a.data.images.jpg.image_url,alt:a.data.title,width:120,height:160,className:"object-cover brightness-75"})}),e.jsxs("div",{className:"flex grow flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-2 lg:flex-row lg:gap-4",children:[o||!(a!=null&&a.data)?e.jsx("div",{className:"h-9 w-full animate-pulse rounded-sm bg-neutral-500 dark:bg-neutral-300"}):e.jsxs(h,{children:[e.jsx(j,{asChild:!0,children:e.jsx(v,{to:`/${r}`,children:e.jsx("h4",{className:"line-clamp-1 text-xl font-medium tracking-tight lg:text-3xl",children:a.data.title})})}),e.jsx(N,{children:e.jsx("p",{children:a.data.title})})]}),e.jsx("div",{className:"flex flex-row flex-wrap items-center gap-2 lg:flex-nowrap",children:o||!(a!=null&&a.data)?Array.from({length:3},(n,d)=>e.jsx(f,{variant:"loading",children:"XXX"},d)):a==null?void 0:a.data.genres.map(n=>e.jsx(f,{children:n.name},n.mal_id))})]}),o||!(a!=null&&a.data)?e.jsx("div",{className:"hidden flex-col gap-2 lg:flex",children:Array.from({length:5},(n,d)=>e.jsx("div",{className:"h-4 w-full animate-pulse rounded-sm bg-neutral-500 dark:bg-neutral-300"},d))}):e.jsx("p",{className:"line-clamp-5 hidden text-neutral-500 dark:text-neutral-300 lg:block",children:a.data.synopsis})]})]})})}function L(){const r=p(t=>t.favorites),l=p(t=>t.setFavorites),s=i.useRef({draggedId:null,draggedOverId:null}),a=t=>{s.current.draggedId=t},o=t=>{s.current.draggedOverId=t;const x=r.indexOf(s.current.draggedId),m=r.indexOf(s.current.draggedOverId),g=[...r];g.splice(x,1),g.splice(m,0,s.current.draggedId),l(g)};return e.jsx("div",{className:"flex w-full max-w-5xl grow flex-col gap-2 py-10",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("div",{className:"flex flex-col gap-4 py-7 lg:gap-8 lg:py-14",children:r==null?void 0:r.map(t=>e.jsx(R,{id:t,onDragStart:a,onDragOver:o},t))})})})})}export{L as default};
