import{c as q,E as G,_,F as H,G as D,H as N,I as Y,J as z,K as j,M,N as X,O as Z,P as Q,S as ee,x as g,Q as te,R as re,r as I,j as C,b as x,D as se}from"./index-88f1b430.js";const me=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var ne=function(n){G(u,n);function u(i,r){var e;return e=n.call(this)||this,e.client=i,e.options=r,e.trackedProps=[],e.selectError=null,e.bindMethods(),e.setOptions(r),e}var t=u.prototype;return t.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},t.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),B(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},t.onUnsubscribe=function(){this.listeners.length||this.destroy()},t.shouldFetchOnReconnect=function(){return O(this.currentQuery,this.options,this.options.refetchOnReconnect)},t.shouldFetchOnWindowFocus=function(){return O(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},t.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},t.setOptions=function(r,e){var a=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(r),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=a.queryKey),this.updateQuery();var c=this.hasListeners();c&&$(this.currentQuery,s,this.options,a)&&this.executeFetch(),this.updateResult(e),c&&(this.currentQuery!==s||this.options.enabled!==a.enabled||this.options.staleTime!==a.staleTime)&&this.updateStaleTimeout();var o=this.computeRefetchInterval();c&&(this.currentQuery!==s||this.options.enabled!==a.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)},t.getOptimisticResult=function(r){var e=this.client.defaultQueryObserverOptions(r),a=this.client.getQueryCache().build(this.client,e);return this.createResult(a,e)},t.getCurrentResult=function(){return this.currentResult},t.trackResult=function(r,e){var a=this,s={},c=function(h){a.trackedProps.includes(h)||a.trackedProps.push(h)};return Object.keys(r).forEach(function(o){Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:function(){return c(o),r[o]}})}),(e.useErrorBoundary||e.suspense)&&c("error"),s},t.getNextResult=function(r){var e=this;return new Promise(function(a,s){var c=e.subscribe(function(o){o.isFetching||(c(),o.isError&&(r!=null&&r.throwOnError)?s(o.error):a(o))})})},t.getCurrentQuery=function(){return this.currentQuery},t.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},t.refetch=function(r){return this.fetch(_({},r,{meta:{refetchPage:r==null?void 0:r.refetchPage}}))},t.fetchOptimistic=function(r){var e=this,a=this.client.defaultQueryObserverOptions(r),s=this.client.getQueryCache().build(this.client,a);return s.fetch().then(function(){return e.createResult(s,a)})},t.fetch=function(r){var e=this;return this.executeFetch(r).then(function(){return e.updateResult(),e.currentResult})},t.executeFetch=function(r){this.updateQuery();var e=this.currentQuery.fetch(this.options,r);return r!=null&&r.throwOnError||(e=e.catch(H)),e},t.updateStaleTimeout=function(){var r=this;if(this.clearStaleTimeout(),!(D||this.currentResult.isStale||!N(this.options.staleTime))){var e=Y(this.currentResult.dataUpdatedAt,this.options.staleTime),a=e+1;this.staleTimeoutId=setTimeout(function(){r.currentResult.isStale||r.updateResult()},a)}},t.computeRefetchInterval=function(){var r;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(r=this.options.refetchInterval)!=null?r:!1},t.updateRefetchInterval=function(r){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=r,!(D||this.options.enabled===!1||!N(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(e.options.refetchIntervalInBackground||z.isFocused())&&e.executeFetch()},this.currentRefetchInterval))},t.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},t.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},t.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},t.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},t.createResult=function(r,e){var a=this.currentQuery,s=this.options,c=this.currentResult,o=this.currentResultState,h=this.currentResultOptions,d=r!==a,p=d?r.state:this.currentQueryInitialState,R=d?this.currentResult:this.previousQueryResult,l=r.state,m=l.dataUpdatedAt,A=l.error,F=l.errorUpdatedAt,S=l.isFetching,f=l.status,P=!1,k=!1,v;if(e.optimisticResults){var L=this.hasListeners(),V=!L&&B(r,e),W=L&&$(r,a,e,s);(V||W)&&(S=!0,m||(f="loading"))}if(e.keepPreviousData&&!l.dataUpdateCount&&(R!=null&&R.isSuccess)&&f!=="error")v=R.data,m=R.dataUpdatedAt,f=R.status,P=!0;else if(e.select&&typeof l.data<"u")if(c&&l.data===(o==null?void 0:o.data)&&e.select===this.selectFn)v=this.selectResult;else try{this.selectFn=e.select,v=e.select(l.data),e.structuralSharing!==!1&&(v=j(c==null?void 0:c.data,v)),this.selectResult=v,this.selectError=null}catch(b){M().error(b),this.selectError=b}else v=l.data;if(typeof e.placeholderData<"u"&&typeof v>"u"&&(f==="loading"||f==="idle")){var y;if(c!=null&&c.isPlaceholderData&&e.placeholderData===(h==null?void 0:h.placeholderData))y=c.data;else if(y=typeof e.placeholderData=="function"?e.placeholderData():e.placeholderData,e.select&&typeof y<"u")try{y=e.select(y),e.structuralSharing!==!1&&(y=j(c==null?void 0:c.data,y)),this.selectError=null}catch(b){M().error(b),this.selectError=b}typeof y<"u"&&(f="success",v=y,k=!0)}this.selectError&&(A=this.selectError,v=this.selectResult,F=Date.now(),f="error");var J={status:f,isLoading:f==="loading",isSuccess:f==="success",isError:f==="error",isIdle:f==="idle",data:v,dataUpdatedAt:m,error:A,errorUpdatedAt:F,failureCount:l.fetchFailureCount,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>p.dataUpdateCount||l.errorUpdateCount>p.errorUpdateCount,isFetching:S,isRefetching:S&&f!=="loading",isLoadingError:f==="error"&&l.dataUpdatedAt===0,isPlaceholderData:k,isPreviousData:P,isRefetchError:f==="error"&&l.dataUpdatedAt!==0,isStale:T(r,e),refetch:this.refetch,remove:this.remove};return J},t.shouldNotifyListeners=function(r,e){if(!e)return!0;var a=this.options,s=a.notifyOnChangeProps,c=a.notifyOnChangePropsExclusions;if(!s&&!c||s==="tracked"&&!this.trackedProps.length)return!0;var o=s==="tracked"?this.trackedProps:s;return Object.keys(r).some(function(h){var d=h,p=r[d]!==e[d],R=o==null?void 0:o.some(function(m){return m===h}),l=c==null?void 0:c.some(function(m){return m===h});return p&&!l&&(!o||R)})},t.updateResult=function(r){var e=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!X(this.currentResult,e)){var a={cache:!0};(r==null?void 0:r.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,e)&&(a.listeners=!0),this.notify(_({},a,r))}},t.updateQuery=function(){var r=this.client.getQueryCache().build(this.client,this.options);if(r!==this.currentQuery){var e=this.currentQuery;this.currentQuery=r,this.currentQueryInitialState=r.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(e==null||e.removeObserver(this),r.addObserver(this))}},t.onQueryUpdate=function(r){var e={};r.type==="success"?e.onSuccess=!0:r.type==="error"&&!Z(r.error)&&(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},t.notify=function(r){var e=this;Q.batch(function(){r.onSuccess?(e.options.onSuccess==null||e.options.onSuccess(e.currentResult.data),e.options.onSettled==null||e.options.onSettled(e.currentResult.data,null)):r.onError&&(e.options.onError==null||e.options.onError(e.currentResult.error),e.options.onSettled==null||e.options.onSettled(void 0,e.currentResult.error)),r.listeners&&e.listeners.forEach(function(a){a(e.currentResult)}),r.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})})},u}(ee);function ie(n,u){return u.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&u.retryOnMount===!1)}function B(n,u){return ie(n,u)||n.state.dataUpdatedAt>0&&O(n,u,u.refetchOnMount)}function O(n,u,t){if(u.enabled!==!1){var i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&T(n,u)}return!1}function $(n,u,t,i){return t.enabled!==!1&&(n!==u||i.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&T(n,t)}function T(n,u){return n.isStaleByTime(u.staleTime)}function ue(){var n=!1;return{clearReset:function(){n=!1},reset:function(){n=!0},isReset:function(){return n}}}var ae=g.createContext(ue()),oe=function(){return g.useContext(ae)};function ce(n,u,t){return typeof u=="function"?u.apply(void 0,t):typeof u=="boolean"?u:!!n}function le(n,u){var t=g.useRef(!1),i=g.useState(0),r=i[1],e=te(),a=oe(),s=e.defaultQueryObserverOptions(n);s.optimisticResults=!0,s.onError&&(s.onError=Q.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=Q.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=Q.batchCalls(s.onSettled)),s.suspense&&(typeof s.staleTime!="number"&&(s.staleTime=1e3),s.cacheTime===0&&(s.cacheTime=1)),(s.suspense||s.useErrorBoundary)&&(a.isReset()||(s.retryOnMount=!1));var c=g.useState(function(){return new u(e,s)}),o=c[0],h=o.getOptimisticResult(s);if(g.useEffect(function(){t.current=!0,a.clearReset();var d=o.subscribe(Q.batchCalls(function(){t.current&&r(function(p){return p+1})}));return o.updateResult(),function(){t.current=!1,d()}},[a,o]),g.useEffect(function(){o.setOptions(s,{listeners:!1})},[s,o]),s.suspense&&h.isLoading)throw o.fetchOptimistic(s).then(function(d){var p=d.data;s.onSuccess==null||s.onSuccess(p),s.onSettled==null||s.onSettled(p,null)}).catch(function(d){a.clearReset(),s.onError==null||s.onError(d),s.onSettled==null||s.onSettled(void 0,d)});if(h.isError&&!a.isReset()&&!h.isFetching&&ce(s.suspense,s.useErrorBoundary,[h.error,o.getCurrentQuery()]))throw h.error;return s.notifyOnChangeProps==="tracked"&&(h=o.trackResult(h,s)),h}function ge(n,u,t){var i=re(n,u,t);return le(i,ne)}const w="https://api.jikan.moe";function be(){const n=new URL("/v4/genres/anime",w);return U(n)}function Qe(n){const u=new URL("/v4/anime",w);for(const t in n){const i=n[t];i&&u.searchParams.set(t,String(i))}return U(u)}function Se({id:n}){const u=new URL(`/v4/anime/${n}`,w);return U(u)}const he=1e3;let K=0,E=Promise.resolve();function U(n){return E=E.then(()=>{const u=Date.now(),t=K+he;if(u<t)return new Promise(i=>{setTimeout(i,t-u)})}).then(()=>{const u=Date.now();return fetch(n).then(t=>{const i=Date.now();if(i-u<20||(K=i),t.status>=400)throw new Error(t.statusText);return t.json()}).then(t=>{if(fe(t))throw new Error(t.error);return t})}),E}function fe(n){return typeof n=="object"&&typeof n.status=="number"&&typeof n.type=="string"&&typeof n.error=="string"&&typeof n.messages=="object"}const de=se("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ve=I.forwardRef(({className:n,variant:u,...t},i)=>C.jsx("div",{ref:i,role:"alert",className:x(de({variant:u}),n),...t}));ve.displayName="Alert";const pe=I.forwardRef(({className:n,...u},t)=>C.jsx("h5",{ref:t,className:x("mb-1 font-medium leading-none tracking-tight",n),...u}));pe.displayName="AlertTitle";const ye=I.forwardRef(({className:n,...u},t)=>C.jsx("div",{ref:t,className:x("text-sm [&_p]:leading-relaxed",n),...u}));ye.displayName="AlertDescription";export{ve as A,me as a,pe as b,ye as c,Qe as d,Se as e,be as g,ge as u};
